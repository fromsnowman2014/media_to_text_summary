# **요구사항 명세서: 음성/영상 파일 변환기 (CLI & macOS GUI)**

## 1. 개요

오디오나 비디오 파일에서 음성을 인식하여 텍스트 스크립트를 추출하고, 시간대별 요약, 번역, 자막 생성 등을 수행하는 애플리케이션입니다. **1단계로 강력한 Command-Line Interface(CLI)를 구축**하고, **2단계로 이를 기반으로 사용자 친화적인 macOS 데스크톱 GUI 애플리케이션을 개발**하는 것을 목표로 합니다.

## 2. 핵심 기능 (CLI & GUI 공통)

- **고성능 텍스트 추출 (High-Performance Transcription):**
  - 입력된 오디오/비디오 파일에서 음성을 감지하여 텍스트로 변환합니다.
  - **오픈소스 AI 활용:** 성능이 최적화된 **`faster-whisper`** 모델을 사용하여 비용 없이 로컬 환경에서 신속하게 실행됩니다.

- **시간대별 요약 기능 (Time-based Summarization):**
  - 전체 스크립트 내용을 분석하여, 시간 흐름에 따라 어떤 내용이 논의되었는지 핵심 포인트를 요약하여 제공합니다.

- **다국어 지원 및 번역 (Multi-language & Translation):**
  - 한국어, 영어를 포함한 다양한 언어의 음성 인식을 지원하며, 다른 언어로 번역된 텍스트 파일을 추가로 생성할 수 있습니다.

- **자막 파일 생성 (Subtitle File Generation):**
  - 추출된 텍스트에 타임스탬프를 포함하여 `SRT` 형식의 자막 파일을 생성합니다.

- **다양한 파일 포맷 지원 (Support for Various File Formats):**
  - **오디오:** `mp3`, `wav`, `m4a` 등
  - **비디오:** `mp4`, `mov`, `avi` 등 (오디오 트랙 자동 추출 및 처리)

---

## 3. 1단계: 핵심 Command-Line Interface(CLI) 명세

### 3.1. CLI 옵션

- `input_file`: (필수) 처리할 하나 이상의 오디오/비디오 파일 또는 디렉토리 경로.
- `--model <model_name>`: (선택) 사용할 Whisper 모델 크기. (예: `tiny`, `base`, `small`, `medium`, `large-v3`). 기본값: `base`.
- `--language <lang_code>`: (선택) 오디오의 원본 언어 코드. (예: `ko`, `en`). 미지정 시 자동 감지.
- `--translate_to <lang_code>`: (선택) 번역할 목표 언어 코드. 지정 시 번역 파일 추가 생성.
- `--summarize`: (선택) 시간대별 내용 요약본을 생성.
- `--subtitle`: (선택) SRT 형식의 자막 파일을 생성.
- `--output_dir <path>`: (선택) 결과물이 저장될 디렉토리. 미지정 시 입력 파일과 동일한 위치.

### 3.2. CLI 추가 기능
- **배치 처리 (Batch Processing):** 디렉토리를 입력받아 내부의 모든 미디어 파일을 순차적으로 처리합니다.
- **처리 상태 시각화 (Processing Status Visualization):** `tqdm` 등을 활용하여 파일 처리 진행 상황을 프로그레스 바로 표시합니다.
- **GPU 가속 지원 (GPU Acceleration Support):** 호환 GPU 사용 시 처리 속도를 향상시키는 옵션을 제공합니다.

---

## 4. 2단계: macOS GUI 기능 확장

CLI 버전의 모든 핵심 기능을 사용자가 쉽게 접근할 수 있도록 네이티브 macOS GUI를 개발합니다.

### 4.1. 개발 목표 및 기술 스택
- **목표:** CLI의 강력한 기능을 직관적인 그래픽 인터페이스로 제공하여 생산성을 극대화합니다.
- **권장 기술 스택:**
    - **네이티브:** **PyObjC**와 Apple의 **AppKit**을 사용하여 macOS에 완벽하게 통합되는 최상의 사용자 경험을 제공합니다.
    - **대안 (크로스플랫폼 기반):** **PySide6(Qt for Python)**를 사용하여 macOS의 네이티브 위젯 스타일을 적용하면서 빠르고 세련된 UI를 개발합니다.

### 4.2. 화면 구성 요소 (UI/UX)

- **메인 윈도우:**
    - **파일 목록 영역:**
        - 처리할 파일들을 추가하고 목록을 관리하는 영역.
        - **파일/폴더 추가 버튼** 및 **드래그 앤 드롭**을 모두 지원.
        - 목록에서 개별 파일 제거 또는 전체 목록 비우기 기능.
    - **설정 패널:**
        - **모델:** 드롭다운 메뉴에서 모델 크기 선택 (`base`, `small`, `large-v3` 등).
        - **언어:** 드롭다운 메뉴에서 음성 언어 선택 (리스트에 '자동 감지' 포함).
        - **추가 작업 (체크박스):**
            - [ ] **번역:** 활성화 시 번역할 언어 선택 드롭다운 표시.
            - [ ] **시간대별 요약 생성**
            - [ ] **자막 파일(SRT) 생성**
    - **출력 경로:**
        - 결과물이 저장될 경로를 표시하는 텍스트 필드.
        - **[경로 변경...]** 버튼을 눌러 저장 위치를 지정.
    - **실행 및 상태 표시:**
        - **[변환 시작]** 버튼으로 모든 작업 개시.
        - 작업 진행률을 보여주는 **프로그레스 바**.
        - 현재 처리 중인 파일과 작업 단계를 알려주는 **상태 메시지 라벨**.
        - 작업 완료 후 "Finder에서 보기" 링크 제공.

### 4.3. 사용자 경험(UX) 고려사항
- **비동기 처리:** 대용량 파일 처리 중에도 앱이 멈추지 않도록 핵심 로직을 별도 스레드에서 실행.
- **직관적 피드백:** 작업의 시작, 진행, 완료, 오류 발생 등 각 상태를 명확한 시각적 요소로 사용자에게 전달.
- **macOS 통합:** 시스템 기본 파일 선택창, 알림 센터, 다크 모드 등과 자연스럽게 연동.

---

## 5. 실행 환경 및 의존성

- **Python 3.9+**
- **핵심 라이브러리:**
    - `faster-whisper`
    - `transformers`, `torch`, `sentencepiece` (번역/요약)
    - `tqdm` (CLI 진행바)
- **GUI 라이브러리 (2단계):**
    - `pyobjc-framework-Cocoa` (네이티브 방식) 또는 `PySide6` (Qt 방식)
- **필수 외부 프로그램:**
    - **ffmpeg:** 오디오/비디오 파일 포맷 처리를 위해 시스템에 반드시 설치 필요.